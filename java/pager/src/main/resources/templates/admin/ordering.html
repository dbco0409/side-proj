<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>
    발주 관리
  </title>
  <!-- Favicon -->
  <link href="/assets/img/brand/favicon.png" rel="icon" type="image/png">
  <link rel="stylesheet" th:href="@{/css/datatables.min.css}">
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
  <!-- Icons -->
  <link href="/assets/js/plugins/nucleo/css/nucleo.css" rel="stylesheet" />
  <link href="/assets/js/plugins/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet" />
  <!-- CSS Files -->
  <link href="/assets/css/argon-dashboard.css?v=1.1.2" rel="stylesheet" />
</head>

<body class="">
  <header th:replace="fragments/admin.head :: commonHead('메인 페이지')"></header>
  <div class="main-content">
    <!-- Navbar -->
    <nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
      <div class="container-fluid">
        <!-- Brand -->
        <a class="h4 mb-0 text-white text-uppercase d-none d-lg-inline-block">발주 관리</a>
      </div>
    </nav>
    <!-- End Navbar -->
    <!-- Header -->
    <div class="header bg-gradient-primary pb-8 pt-5 pt-md-8"></div>
    <div class="container-fluid mt--7">
      <!-- Table -->
      <div class="row">
        <div class="col">
          <div class="card shadow">
            <div class="card-header border-0">
             	<div class="row">
	              <div class="col-8">
	                  <h3 class="mb-4">발주 리스트</h3>
	              </div>
				  <div class="col-4 text-right"><a class="btn btn-primary" href="/ordering/sync">수동 발주</a></div>
            </div>
            <div class="table-responsive">
              <table id="table" class="table table-striped table-bordered table align-items-center table-flush">
                <colgroup>
                  <col width="50"/>
                  <col />
                  <col width="200"/>
                  <col width="150"/>
                  <col width="100"/>
                </colgroup>
				<thead>
					<tr>
						<th>No</th>
				        <th>사업명</th>
				        <th>기관명</th>
						<th>게시일시</th>
						<th>견적번호</th>
					</tr>
				</thead>
				<tbody id="bidTbody" th:fragment="bidTbody">
					<tr th:each="item, stat : ${items}" th:onclick="'location.href=\'' + @{/admin/ordering/view/{id}(id=${item.order_plan_unty_no})} + '\''" style="cursor:pointer">
								
					    <!-- ✅ 역순 번호 -->
					    <td th:text="${items.size() - stat.index}" class="center"></td>
					
					    <!-- ✅ 요청명 -->
					    <td th:text="${item.biz_nm != null ? item.biz_nm : '-'}"></td>
					
					    <!-- ✅ 총괄기관명 -->
					    <td th:text="${item.order_instt_nm != null ? item.order_instt_nm : '-'}" class="center"></td>
					
					    <!-- ✅ 게시일자 -->
					    <td th:text="${item.ntice_dt != null ? item.ntice_dt : '-'}" class="center"></td>
					
					    <!-- ✅ 요청번호 -->
					    <td th:text="${item.order_plan_unty_no}" class="center"></td>
					</tr>
					
					<!-- ✅ 데이터 없을 때 -->
					<tr th:if="${#lists.isEmpty(items)}">
					    <td colspan="7" class="text-center">등록된 발주 계획이 없습니다.</td>
					</tr>
			    </tbody>
              </table>
            </div>
            
          </div>
        </div>
      </div>
    </div>
  </div>
  <footer th:replace="fragments/admin.foot :: commonFoot('푸터 페이지')"></footer>
  <script th:src="@{/js/datatables.min.js}"></script>
  <script th:src="@{/js/list.js}"></script>
</body>

</html>